// swift-tools-version: 5.9
// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on
// https://github.com/algolia/api-clients-automation. DO NOT EDIT.

import PackageDescription

var extraPackageDependencies: [Package.Dependency] = []
var extraTargetDependencies: [Target.Dependency] = []
var targets: [Target] = []
var products: [Product] = []

#if os(Linux)
    let macOSVersion: SupportedPlatform.MacOSVersion = .v10_15
#else
    let macOSVersion: SupportedPlatform.MacOSVersion = .v11
#endif

#if os(Linux)
    extraPackageDependencies.append(contentsOf: [
        .package(url: "https://github.com/apple/swift-crypto.git", from: "3.2.0"),
        .package(url: "https://github.com/apple/swift-log.git", from: "1.5.4"),
    ])
    extraTargetDependencies.append(contentsOf: [
        .product(name: "Crypto", package: "swift-crypto"),
        .product(name: "Logging", package: "swift-log"),
    ])
#endif

#if os(Linux)
    targets.append(contentsOf: [
        .systemLibrary(name: "zlib", pkgConfig: "zlib", providers: [.apt(["zlib1g-dev"])]),
        .target(
            name: "AlgoliaCore",
            dependencies: [
                "zlib",
            ] + extraTargetDependencies,
            path: "Sources/Core"
        ),
    ])
#else
    targets.append(
        .target(
            name: "AlgoliaCore",
            dependencies: extraTargetDependencies,
            path: "Sources/Core"
        )
    )
#endif

products.append(
    .library(
        name: "AlgoliaCore",
        targets: ["AlgoliaCore"]
    )
)

[
    "Abtesting",
    "Analytics",
    "Ingestion",
    "Insights",
    "Monitoring",
    "Personalization",
    "QuerySuggestions",
    "Recommend",
    "Search",
].enumerated().forEach { _, library in
    targets.append(
        .target(
            name: library,
            dependencies: [
                .target(name: "AlgoliaCore"),
            ] + extraTargetDependencies,
            path: "Sources/\(library)",
            resources: [
                .copy("../../PrivacyInfo.xcprivacy"),
            ]
        )
    )

    products.append(
        .library(
            name: "\(library)",
            targets: ["\(library)"]
        )
    )
}

let package = Package(
    name: "AlgoliaSearchClient",
    platforms: [
        .iOS(.v14),
        .macOS(macOSVersion),
        .tvOS(.v14),
        .watchOS(.v7),
    ],
    products: products,
    dependencies: extraPackageDependencies,
    targets: targets
)
